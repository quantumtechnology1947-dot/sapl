{% extends 'material_costing/base.html' %}
{% block title %}Cost Analysis Report{% endblock %}
{% block content %}
<div class="mb-6">
    <h2 class="text-sm font-bold text-gray-900">Cost Analysis Report</h2>
</div>
<div class="bg-white rounded border border-gray-200 p-6 mb-6">
    <form method="get" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">From Date</label>
            <input type="date" name="from_date" value="{{ request.GET.from_date }}" class="w-full px-4 py-2 border rounded">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">To Date</label>
            <input type="date" name="to_date" value="{{ request.GET.to_date }}" class="w-full px-4 py-2 border rounded">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Item ID</label>
            <input type="text" name="item_id" value="{{ request.GET.item_id }}" placeholder="Optional" class="w-full px-4 py-2 border rounded">
        </div>
        <div class="flex items-end">
            <button type="submit" class="w-full px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Generate Report</button>
        </div>
    </form>
</div>
<div class="bg-white rounded border border-gray-200 p-6">
    {% if costs %}
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cost No</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Item</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Raw Material</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Process</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Finish</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Total</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for cost in costs %}
                <tr>
                    <td class="px-6 py-4 text-sm">{{ cost.livecostno }}</td>
                    <td class="px-6 py-4 text-sm">{{ cost.itemid }}</td>
                    <td class="px-6 py-4 text-sm">{{ cost.rawmaterial }}</td>
                    <td class="px-6 py-4 text-sm">{{ cost.process }}</td>
                    <td class="px-6 py-4 text-sm">{{ cost.finish }}</td>
                    <td class="px-6 py-4 text-sm font-bold">{{ cost.total_cost }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="text-gray-500 text-center">No data available. Please select filters and generate report.</p>
    {% endif %}
</div>
{% endblock %}








