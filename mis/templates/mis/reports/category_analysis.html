{% extends 'mis/base.html' %}
{% block title %}Category Analysis{% endblock %}
{% block content %}
<div class="mb-6"><h2 class="text-sm font-bold">Category Analysis Report</h2></div>
<div class="bg-white rounded border border-gray-200 p-6 mb-6">
    <div class="grid grid-cols-3 gap-4">
        <div><p class="text-gray-600">Total Categories</p><p class="text-sm font-bold">{{ total_categories }}</p></div>
        <div><p class="text-gray-600">Total Sub-Categories</p><p class="text-sm font-bold">{{ total_subcategories }}</p></div>
        <div><p class="text-gray-600">Avg Sub-Categories</p><p class="text-sm font-bold">{% if total_categories %}{{ total_subcategories|div:total_categories|floatformat:1 }}{% else %}0{% endif %}</p></div>
    </div>
</div>
<div class="bg-white rounded border border-gray-200 p-6">
    <h3 class="text-lg font-semibold mb-4">Top Categories by Sub-Category Count</h3>
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Category</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sub-Category Count</th>
            </tr>
        </thead>
        <tbody class="divide-y">
            {% for cat in top_categories %}
            <tr><td class="px-6 py-4 text-sm">{{ cat }}</td><td class="px-6 py-4 text-sm font-bold">{{ cat.subcat_count }}</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}








