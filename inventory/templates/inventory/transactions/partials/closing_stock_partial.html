<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200 text-xs">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-4 py-2 text-left text-xs font-bold text-gray-700 w-16">SN</th>
                <th class="px-4 py-2 text-left text-xs font-bold text-gray-700">From</th>
                <th class="px-4 py-2 text-left text-xs font-bold text-gray-700">To</th>
                <th class="px-4 py-2 text-right text-xs font-bold text-gray-700">Closing Stock</th>
                <th class="px-4 py-2 text-center text-xs font-bold text-gray-700 w-24">Actions</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for record in records %}
            <tr class="hover:bg-gray-50">
                <td class="px-4 py-2 text-xs text-gray-900">{{ forloop.counter }}</td>
                <td class="px-4 py-2 text-xs text-gray-900">{{ record.fromdt }}</td>
                <td class="px-4 py-2 text-xs text-gray-900">{{ record.todt }}</td>
                <td class="px-4 py-2 text-xs font-bold text-blue-600 text-right">{{ record.clstock|floatformat:2 }}</td>
                <td class="px-4 py-2 text-center">
                    <form method="post" class="inline"
                          hx-post="{% url 'inventory:closing-stock' %}"
                          hx-target="#closing-stock-container"
                          hx-swap="innerHTML"
                          onsubmit="return confirm('Delete this closing stock record?');">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="delete">
                        <input type="hidden" name="record_id" value="{{ record.id }}">
                        <button type="submit" class="text-red-600 hover:text-red-900 text-xs font-medium underline">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="px-4 py-8 text-center text-sm text-gray-500">
                    No closing stock records found. Use the form below to add records.
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot class="bg-gray-50">
            <tr>
                <td colspan="5" class="px-4 py-3">
                    <form method="post"
                          hx-post="{% url 'inventory:closing-stock' %}"
                          hx-target="#closing-stock-container"
                          hx-swap="innerHTML">
                        {% csrf_token %}
                        <div class="grid grid-cols-12 gap-3 items-end">
                            <!-- From Date -->
                            <div class="col-span-3">
                                <label class="block text-xs font-medium text-gray-700 mb-1">From</label>
                                {{ form.from_date }}
                                {% if form.from_date.errors %}
                                <p class="text-xs text-red-600 mt-1">{{ form.from_date.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- To Date -->
                            <div class="col-span-3">
                                <label class="block text-xs font-medium text-gray-700 mb-1">To</label>
                                {{ form.to_date }}
                                {% if form.to_date.errors %}
                                <p class="text-xs text-red-600 mt-1">{{ form.to_date.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Closing Stock Value -->
                            <div class="col-span-3">
                                <label class="block text-xs font-medium text-gray-700 mb-1">Closing Stock</label>
                                {{ form.closing_stock_value }}
                                {% if form.closing_stock_value.errors %}
                                <p class="text-xs text-red-600 mt-1">{{ form.closing_stock_value.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Submit Button -->
                            <div class="col-span-3">
                                <button type="submit"
                                        class="w-full bg-red-600 hover:bg-red-700 text-white font-medium px-4 py-2 rounded-md transition-colors text-xs">
                                    Insert
                                </button>
                            </div>
                        </div>

                        <!-- Form-level errors -->
                        {% if form.non_field_errors %}
                        <div class="mt-2">
                            <p class="text-xs text-red-600">{{ form.non_field_errors.0 }}</p>
                        </div>
                        {% endif %}
                    </form>
                </td>
            </tr>
        </tfoot>
    </table>
</div>
