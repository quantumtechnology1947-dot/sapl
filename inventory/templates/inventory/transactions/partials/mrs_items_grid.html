<table class="w-full border-collapse text-xs">
    <thead class="bg-gray-100">
        <tr>
            <th class="border border-gray-300 px-2 py-2 text-left">SN</th>
            <th class="border border-gray-300 px-2 py-2 text-left">ItemCode</th>
            <th class="border border-gray-300 px-2 py-2 text-left">Description</th>
            <th class="border border-gray-300 px-2 py-2 text-center">UOM</th>
            <th class="border border-gray-300 px-2 py-2 text-right">Stock Qty</th>
            <th class="border border-gray-300 px-2 py-2 text-center">BGGroup/WoNo</th>
            <th class="border border-gray-300 px-2 py-2 text-center">Req. Qty</th>
            <th class="border border-gray-300 px-2 py-2 text-center">Location</th>
            <th class="border border-gray-300 px-2 py-2 text-left">Remarks</th>
            <th class="border border-gray-300 px-2 py-2 text-center">Action</th>
        </tr>
    </thead>
    <tbody>
        {% if items %}
            {% for item in items %}
            <tr class="hover:bg-gray-50">
                <td class="border border-gray-300 px-2 py-1 text-center">{{ forloop.counter }}</td>
                <td class="border border-gray-300 px-2 py-1">{{ item.itemcode }}</td>
                <td class="border border-gray-300 px-2 py-1">{{ item.manfdesc|truncatewords:10 }}</td>
                <td class="border border-gray-300 px-2 py-1 text-center">{{ item.uombasic }}</td>
                <td class="border border-gray-300 px-2 py-1 text-right">{{ item.stockqty|floatformat:2 }}</td>
                <td class="border border-gray-300 px-2 py-1">
                    <select onchange="handleTypeChange(this)" class="type-selector px-1 py-0.5 border border-gray-300 rounded text-xs w-full">
                        <option value="">Select</option>
                        <option value="bggroup">BGGroup</option>
                        <option value="wono">WONo</option>
                    </select>
                    <select class="dept-dropdown hidden px-1 py-0.5 border border-gray-300 rounded text-xs w-full mt-1">
                        <option value="">Select Dept</option>
                        {% for dept in departments %}
                        <option value="{{ dept.id }}">{{ dept.symbol }}</option>
                        {% endfor %}
                    </select>
                    <input type="text" class="wono-input hidden px-1 py-0.5 border border-gray-300 rounded text-xs w-full mt-1" placeholder="WO Number">
                </td>
                <td class="border border-gray-300 px-2 py-1">
                    <input type="number" step="0.001" min="0" max="{{ item.stockqty }}" class="req-qty-input px-1 py-0.5 border border-gray-300 rounded text-xs w-20" placeholder="Qty">
                </td>
                <td class="border border-gray-300 px-2 py-1 text-center">{{ item.location|default:"" }}</td>
                <td class="border border-gray-300 px-2 py-1">
                    <input type="text" class="remarks-input px-1 py-0.5 border border-gray-300 rounded text-xs w-full" placeholder="Remarks">
                </td>
                <td class="border border-gray-300 px-2 py-1 text-center">
                    <button type="button"
                            onclick="addItemToCart(this, '{% url 'inventory:mrs-add-to-cart' %}')"
                            data-item-id="{{ item.id }}"
                            data-item-code="{{ item.itemcode }}"
                            data-item-desc="{{ item.manfdesc|escapejs }}"
                            data-uom="{{ item.uombasic }}"
                            data-stock-qty="{{ item.stockqty }}"
                            data-location="{{ item.location|default:""|escapejs }}"
                            class="bg-red-600 hover:bg-red-700 text-white px-2 py-0.5 rounded text-xs font-medium">
                        Add
                    </button>
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="10" class="border border-gray-300 px-4 py-8 text-center text-gray-500">
                    <div class="flex flex-col items-center">
                        <svg class="h-12 w-12 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                        </svg>
                        <p class="text-sm">No items found. Please select a category and search.</p>
                    </div>
                </td>
            </tr>
        {% endif %}
    </tbody>
</table>
