{# Select Dropdown - SAP Fiori Style #}
{% comment %}
Component: Select Input
Purpose: Standard select dropdown with label, validation, and HTMX support
Design: Compact SAP Fiori styling with h-9 height, text-sm input, text-xs label, custom dropdown arrow

Parameters:
  - label (optional): Field label text
  - name (required): Select name attribute
  - options (required): List of options with 'value' and 'label' keys
  - selected (optional): Currently selected value
  - placeholder (optional): Placeholder option text (creates empty option)
  - required (optional): Boolean for required field
  - disabled (optional): Boolean for disabled state
  - help_text (optional): Helper text below select
  - error (optional): Error message to display
  - inline (optional): Boolean for inline layout (label beside select)
  - extra_classes (optional): Additional CSS classes
  - htmx_get (optional): HTMX GET URL for dynamic loading
  - htmx_post (optional): HTMX POST URL
  - htmx_trigger (optional): HTMX trigger event (e.g., "change")
  - htmx_target (optional): HTMX target selector
  - htmx_swap (optional): HTMX swap strategy
  - htmx_include (optional): HTMX include selector

Usage Examples:
  Basic:
    {% include 'core/components/forms/select_input.html' with 
      label="Status" 
      name="status" 
      options=status_options 
      selected=current_status 
      required=True 
    %}
  
  With Placeholder:
    {% include 'core/components/forms/select_input.html' with 
      label="Category" 
      name="category" 
      options=categories 
      placeholder="Select a category..." 
    %}
  
  Inline Layout:
    {% include 'core/components/forms/select_input.html' with 
      label="Type" 
      name="type" 
      options=type_options 
      inline=True 
    %}
  
  With HTMX Dynamic Loading:
    {% include 'core/components/forms/select_input.html' with 
      label="Supplier" 
      name="supplier" 
      options=suppliers 
      htmx_get="/api/load-items/" 
      htmx_trigger="change" 
      htmx_target="#items-container" 
    %}
  
  With Error:
    {% include 'core/components/forms/select_input.html' with 
      label="Department" 
      name="department" 
      options=departments 
      error=form.department.errors.0 
    %}

Note: Options should be a list of dictionaries with 'value' and 'label' keys:
  options = [
    {'value': '1', 'label': 'Option 1'},
    {'value': '2', 'label': 'Option 2'},
  ]
{% endcomment %}

<div class="{% if inline %}flex items-center gap-3{% else %}mb-2{% endif %}">
    {% if label %}
    <label for="id_{{ name }}" class="block text-xs font-medium text-gray-700 {% if inline %}w-32 flex-shrink-0{% else %}mb-1{% endif %}">
        {{ label }}{% if required %}<span class="text-sap-red ml-0.5">*</span>{% endif %}
    </label>
    {% endif %}
    <div class="{% if inline %}flex-1{% else %}w-full{% endif %} relative">
        <select name="{{ name }}" 
                id="id_{{ name }}"
                {% if required %}required{% endif %}
                {% if disabled %}disabled{% endif %}
                class="w-full h-9 pl-3 pr-8 text-sm border {% if error %}border-sap-red{% else %}border-gray-300{% endif %} rounded appearance-none bg-white focus:outline-none focus:border-sap-blue focus:ring-1 focus:ring-sap-blue disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed {{ extra_classes }}"
                {% if htmx_get %}hx-get="{{ htmx_get }}"{% endif %}
                {% if htmx_post %}hx-post="{{ htmx_post }}"{% endif %}
                {% if htmx_trigger %}hx-trigger="{{ htmx_trigger }}"{% endif %}
                {% if htmx_target %}hx-target="{{ htmx_target }}"{% endif %}
                {% if htmx_swap %}hx-swap="{{ htmx_swap }}"{% endif %}
                {% if htmx_include %}hx-include="{{ htmx_include }}"{% endif %}>
            {% if placeholder %}<option value="">{{ placeholder }}</option>{% endif %}
            {% for option in options %}
            <option value="{{ option.value }}" {% if option.value|stringformat:"s" == selected|stringformat:"s" %}selected{% endif %}>
                {{ option.label }}
            </option>
            {% endfor %}
        </select>
        {# Custom dropdown arrow #}
        <div class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </div>
        {% if help_text %}
        <p class="mt-0.5 text-xs text-gray-500">{{ help_text }}</p>
        {% endif %}
        {% if error %}
        <p class="mt-0.5 text-xs text-sap-red flex items-center">
            <svg class="w-3 h-3 mr-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            {{ error }}
        </p>
        {% endif %}
    </div>
</div>








