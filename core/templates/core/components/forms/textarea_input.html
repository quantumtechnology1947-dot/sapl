{# Textarea Input - SAP Fiori Style #}
{% comment %}
Component: Textarea Input
Purpose: Multi-line text input field with label, validation, auto-resize, and HTMX support
Design: Compact SAP Fiori styling with text-sm font, compact padding, optional auto-resize

Parameters:
  - label (optional): Field label text
  - name (required): Textarea name attribute
  - value (optional): Current value
  - rows (optional): Number of visible rows (default: 3)
  - placeholder (optional): Placeholder text
  - required (optional): Boolean for required field
  - readonly (optional): Boolean for read-only state
  - disabled (optional): Boolean for disabled state
  - maxlength (optional): Maximum character length
  - help_text (optional): Helper text below textarea
  - error (optional): Error message to display
  - inline (optional): Boolean for inline layout (label beside textarea)
  - auto_resize (optional): Boolean to enable auto-resize on input
  - extra_classes (optional): Additional CSS classes
  - htmx_get (optional): HTMX GET URL
  - htmx_post (optional): HTMX POST URL
  - htmx_trigger (optional): HTMX trigger event
  - htmx_target (optional): HTMX target selector
  - htmx_swap (optional): HTMX swap strategy
  - htmx_include (optional): HTMX include selector

Usage Examples:
  Basic:
    {% include 'core/components/forms/textarea_input.html' with 
      label="Description" 
      name="description" 
      value=form.description.value 
      required=True 
    %}
  
  With Auto-resize:
    {% include 'core/components/forms/textarea_input.html' with 
      label="Notes" 
      name="notes" 
      auto_resize=True 
      rows=2 
    %}
  
  Inline Layout:
    {% include 'core/components/forms/textarea_input.html' with 
      label="Comments" 
      name="comments" 
      inline=True 
      rows=4 
    %}
  
  With HTMX:
    {% include 'core/components/forms/textarea_input.html' with 
      label="Message" 
      name="message" 
      htmx_post="/api/save-draft/" 
      htmx_trigger="input changed delay:1s" 
      htmx_target="#save-status" 
    %}
  
  With Error:
    {% include 'core/components/forms/textarea_input.html' with 
      label="Address" 
      name="address" 
      error=form.address.errors.0 
      maxlength=500 
    %}
{% endcomment %}

<div class="{% if inline %}flex items-start gap-3{% else %}mb-2{% endif %}">
    {% if label %}
    <label for="id_{{ name }}" class="block text-xs font-medium text-gray-700 {% if inline %}w-32 flex-shrink-0 pt-2{% else %}mb-1{% endif %}">
        {{ label }}{% if required %}<span class="text-sap-red ml-0.5">*</span>{% endif %}
    </label>
    {% endif %}
    <div class="{% if inline %}flex-1{% else %}w-full{% endif %}">
        <textarea name="{{ name }}" 
                  id="id_{{ name }}"
                  rows="{{ rows|default:3 }}"
                  {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
                  {% if required %}required{% endif %}
                  {% if readonly %}readonly{% endif %}
                  {% if disabled %}disabled{% endif %}
                  {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
                  class="w-full px-3 py-2 text-sm border {% if error %}border-sap-red{% else %}border-gray-300{% endif %} rounded focus:outline-none focus:border-sap-blue focus:ring-1 focus:ring-sap-blue disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed readonly:bg-gray-50 readonly:text-gray-600 {% if auto_resize %}resize-none{% else %}resize-y{% endif %} {{ extra_classes }}"
                  {% if htmx_get %}hx-get="{{ htmx_get }}"{% endif %}
                  {% if htmx_post %}hx-post="{{ htmx_post }}"{% endif %}
                  {% if htmx_trigger %}hx-trigger="{{ htmx_trigger }}"{% endif %}
                  {% if htmx_target %}hx-target="{{ htmx_target }}"{% endif %}
                  {% if htmx_swap %}hx-swap="{{ htmx_swap }}"{% endif %}
                  {% if htmx_include %}hx-include="{{ htmx_include }}"{% endif %}
                  {% if auto_resize %}oninput="this.style.height = ''; this.style.height = this.scrollHeight + 'px'"{% endif %}>{{ value|default:'' }}</textarea>
        {% if help_text %}
        <p class="mt-0.5 text-xs text-gray-500">{{ help_text }}</p>
        {% endif %}
        {% if error %}
        <p class="mt-0.5 text-xs text-sap-red flex items-start">
            <svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            {{ error }}
        </p>
        {% endif %}
    </div>
</div>








